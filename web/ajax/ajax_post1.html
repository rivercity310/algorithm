<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script>
      window.addEventListener("load", () => {
        document.getElementById("loginb").onclick = handleButtonPress;
      });

      function handleButtonPress(e) {
        e.preventDefault();
        const xhr = new XMLHttpRequest();
        const form = document.querySelector("#loginf");
        const id = document.querySelector("#id");
        const passwd = document.querySelector("#passwd");
        const queryString = "id=" + encodeURIComponent(id.value) + "&passwd=" + passwd.value;

        xhr.addEventListener("load", () => {
          const jsonObj = JSON.parse(xhr.responseText);
          const output = document.querySelector("output");

          if (jsonObj.result == "ok") {
            output.textContent = "로그인 성공!";
            output.style.color = "blue";
          } else if (jsonObj.result == "fail") {
            output.textContent = "로그인 실패!";
            output.style.color = "red";
            form.reset();
            id.focus();
          }
        });
        xhr.open("POST", form.action, true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send(queryString);
      }
    </script>

</head>
<body>
  <h3>계정과 패스워드를 입력해주세요</h3>
  <form id="loginf" action="sample/ajax_login.jsp">
    <input type="text" id="id" name="id" required /><br/>
    <input type="password" id="passwd" name="passwd" required/><br/>
    <input type="submit" id="loginb" value="로그인"/>
    <output></output>
  </form>
</body>
</html>